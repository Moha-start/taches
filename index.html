<!DOCTYPE html>
<html>
<head>
    <title>Liste des tâches</title>
    <meta charset="UTF-8">
    <style>
    body {
      font-family: Arial, sans-serif;
      margin: 5vw;
      padding: 5vw;
      background: #f5f5f5;
      color: #333;
      box-sizing: border-box;
    }

    h1 {
      color: #4caf50;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
      text-align: center;
    }

    .input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    #noteInput {
      font-size: 1rem;
      padding: 0.8rem;
      flex: 1;
      min-width: 200px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      font-size: 1rem;
      padding: 0.8rem 1.5rem;
      background: #4caf50;
      color: #fff;
      border: none;
      border-radius: 5px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1);
      transition: background 0.3s ease;
      cursor: pointer;
    }

    button:hover {
      background: #45a049;
    }

    .delete-btn {
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      background: #f44336;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 0.5rem;
    }

    .delete-btn:hover {
      background: #d32f2f;
    }

    .validate-btn {
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      background: #2196f3;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 0.5rem;
    }

    .validate-btn:hover {
      background: #1976d2;
    }

    .validate-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
    }

    #compteur {
      font-size: 1rem;
      color: #555;
      margin: 1rem 0;
      text-align: center;
    }

    ul#historique {
      list-style-type: none;
      padding: 0;
      margin: 0;
    }

    ul#historique li {
      background: #fff;
      padding: 0.8rem;
      margin-bottom: 0.8rem;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      font-size: 0.95rem;
    }

    ul#historique li:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.2);
      background: #e8f5e9;
    }

    #errorMessage {
      color: #f44336;
      font-size: 1rem;
      margin: 1rem 0;
      text-align: center;
    }

    @media (max-width: 600px) {
      body {
        margin: 2vw;
        padding: 2vw;
      }

      h1 {
        font-size: 1.5rem;
      }

      .input-container {
        flex-direction: column;
      }

      #noteInput {
        width: 100%;
        font-size: 0.9rem;
        padding: 0.6rem;
      }

      button {
        width: 100%;
        font-size: 0.9rem;
        padding: 0.6rem;
      }

      .delete-btn, .validate-btn {
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
        margin-left: 0;
        margin-top: 0.5rem;
      }

      #compteur {
        font-size: 0.9rem;
      }

      ul#historique li {
        flex-direction: column;
        align-items: flex-start;
        font-size: 0.85rem;
        padding: 0.6rem;
      }

      ul#historique li span {
        margin-bottom: 0.5rem;
      }

      #errorMessage {
        font-size: 0.9rem;
      }
    }
        body { font-family: Arial, sans-serif; margin: 20px; }
        .task { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .task button { margin-left: 10px; }
    </style>
</head>
<body>
    <h1>Liste des tâches</h1>
    <div>
        <input type="text" id="note" placeholder="Entrez votre tâche">
        <input type="datetime-local" id="deadline" placeholder="Date limite">
        <button onclick="addTask()">Ajouter</button>
    </div>
    <div id="tasks"></div>

    <script>
        function loadTasks() {
            fetch('https://script.google.com/macros/s/AKfycbxCtRZjUqLEEaJfP-iDI24IMc05iC9M4ocx7-i8ksuld-Nbl_3taTj96C-BoDX_1lkQ/exec')
                .then(response => response.json())
                .then(data => {
                    const tasksDiv = document.getElementById('tasks');
                    tasksDiv.innerHTML = '';
                    data.forEach(task => {
                        const taskDiv = document.createElement('div');
                        taskDiv.className = 'task';
                        taskDiv.innerHTML = `<span>${task.deadline} : ${task.note}</span>
                            <button onclick="deleteTask('${task.deadline}')">Supprimer</button>`;
                        tasksDiv.appendChild(taskDiv);
                    });
                });
        }

        function addTask() {
            const note = document.getElementById('note').value;
            const deadline = document.getElementById('deadline').value;
            if (note && deadline) {
                fetch(`YOUR_SCRIPT_URL?add=true&note=${encodeURIComponent(note)}&deadline=${encodeURIComponent(deadline)}`)
                    .then(() => {
                        document.getElementById('note').value = '';
                        document.getElementById('deadline').value = '';
                        loadTasks();
                    });
            }
        }

        function deleteTask(deadline) {
            fetch(`YOUR_SCRIPT_URL?delete=true&deadline=${encodeURIComponent(deadline)}`)
                .then(() => loadTasks());
        }

        // Charger les tâches au démarrage
        window.onload = loadTasks;
    </script>
</body>
</html>
